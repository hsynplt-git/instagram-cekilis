<!DOCTYPE html>
<html>
<head>
<title>Instagram Ã‡ekiliÅŸ</title>
<style>
body { font-family: Arial; background:#111; color:white; text-align:center; padding:40px; }
button { padding:15px 30px; font-size:18px; background:#e1306c; color:white; border:none; border-radius:10px; }
#winners { font-size:24px; margin-top:30px; }
</style>
</head>
<body>

<h1>Instagram Ã‡ekiliÅŸ Sistemi ğŸ‰</h1>

<input id="url" style="width:80%;padding:10px" value="https://www.instagram.com/reel/DTFGE4lCLUM/">

<br><br>
<button onclick="draw()">Ã‡ekiliÅŸi BaÅŸlat</button>

<div id="status"></div>
async function draw(){
  document.getElementById("status").innerText="Yorumlar Ã§ekiliyor... (17k olabilir, bekleyin)";

  const res = await fetch("/draw",{
    method:"POST",
    headers:{ "Content-Type":"application/json"},
    body: JSON.stringify({url:document.getElementById("url").value})
  });

  const data = await res.json();

  document.getElementById("status").innerText =
    "Toplam yorum: "+data.total_comments+" | GeÃ§erli katÄ±lÄ±mcÄ±: "+data.valid_users;

  let html = "<h2>ğŸ† AsÄ±l Kazananlar</h2>";
  data.main_winners.forEach(w=>{
    html += `<div><img src="${w.photo}" width="80" style="border-radius:50%"><br>@${w.username}</div><br>`;
  });

  html += "<h2>ğŸ¯ Yedekler</h2>";
  data.backup_winners.forEach(w=>{
    html += `<div><img src="${w.photo}" width="80" style="border-radius:50%"><br>@${w.username}</div><br>`;
  });

  document.getElementById("winners").innerHTML = html;
}

<script>
async function draw(){
  document.getElementById("status").innerText="Yorumlar Ã§ekiliyor... (17k olabilir, bekleyin)";
  const res = await fetch("/draw",{
    method:"POST",
    headers:{ "Content-Type":"application/json"},
    body: JSON.stringify({url:document.getElementById("url").value})
  });
  const data = await res.json();

  document.getElementById("status").innerText =
    "Toplam yorum: "+data.total_comments+" | GeÃ§erli katÄ±lÄ±mcÄ±: "+data.valid_users;

  document.getElementById("winners").innerHTML =
    "ğŸ† Kazananlar:<br>@"+data.winners[0]+"<br>@"+data.winners[1];
}
</script>

</body>
</html>
